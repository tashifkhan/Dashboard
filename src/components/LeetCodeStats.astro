---
import { leetCodeData } from "../data/leetcode";
import { Trophy, Target, Calendar, Award } from "lucide-react";
import { Card, CardContent } from "@/components/ui/card";

const { stats, profile } = leetCodeData;
---

<!-- Top Metric Grid (Redesigned) -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 mb-8">
	{
		[
			{
				label: "Total Solved",
				value: stats.totalSolved.toString(),
				sub: `of ${stats.totalQuestions} problems`,
				icon: Trophy,
			},
			{
				label: "Global Ranking",
				value: `#${stats.ranking.toLocaleString()}`,
				sub: "out of millions",
				icon: Target,
			},
			{
				label: "Reputation",
				value: stats.reputation.toString(),
				sub: "contribution points",
				icon: Award,
			},
			{
				label: "Contribution",
				value: stats.contributionPoints.toString(),
				sub: "points earned",
				icon: Calendar,
			},
		].map((card) => (
			<Card className="group relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm transition-all duration-300 hover:border-primary/20 hover:shadow-sm">
				<CardContent className="p-5 flex items-start justify-between gap-4">
					<div class="space-y-2 min-w-0">
						<p class="text-[11px] uppercase tracking-wide font-medium text-muted-foreground">
							{card.label}
						</p>
						<p class="text-2xl font-semibold text-foreground tabular-nums">
							{card.value}
						</p>
						<p class="text-xs text-muted-foreground/70 truncate">{card.sub}</p>
					</div>
					<div class="shrink-0">
						<div class="h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary shadow-sm">
							<card.icon className="w-5 h-5" />
						</div>
					</div>
				</CardContent>
			</Card>
		))
	}
</div>

<!-- Difficulty Breakdown (Redesigned) -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-5 mb-4">
	{
		[
			{
				label: "Easy",
				solved: stats.easySolved,
				total: stats.totalEasy,
				hue: "from-primary/60 to-primary/70",
			},
			{
				label: "Medium",
				solved: stats.mediumSolved,
				total: stats.totalMedium,
				hue: "from-primary/70 to-primary/80",
			},
			{
				label: "Hard",
				solved: stats.hardSolved,
				total: stats.totalHard,
				hue: "from-primary/80 to-primary",
			},
		].map((diff) => {
			const pct = Math.round((diff.solved / diff.total) * 100);
			return (
				<Card className="relative overflow-hidden border-border/50 bg-card/50 backdrop-blur-sm group transition-all duration-300 hover:border-primary/20 hover:shadow-sm">
					<CardContent className="p-5">
						<div class="flex items-center justify-between mb-3">
							<h3 class="text-sm font-medium text-foreground tracking-wide">
								{diff.label}
							</h3>
							<span class="text-base font-semibold text-foreground tabular-nums">
								{diff.solved}/{diff.total}
							</span>
						</div>
						<div class="h-2.5 relative rounded-full bg-secondary overflow-hidden">
							<div
								class={`absolute inset-y-0 left-0 rounded-full bg-gradient-to-r ${diff.hue}`}
								style={`width:${(diff.solved / diff.total) * 100}%`}
							/>
						</div>
						<div class="mt-2 flex items-center justify-between text-[11px] text-muted-foreground">
							<span>{pct}% completed</span>
							<span class="inline-flex items-center gap-1">
								<span class="w-1.5 h-1.5 rounded-full bg-primary animate-pulse" />
								progress
							</span>
						</div>
					</CardContent>
				</Card>
			);
		})
	}
</div>

<!-- Legend / Meta -->
<div class="mb-8 text-[11px] text-muted-foreground flex items-center gap-3">
	<div class="flex items-center gap-1.5">
		<span
			class="w-3 h-3 rounded-full bg-gradient-to-br from-primary/60 to-primary/70"
		></span>
		<span>Easy</span>
	</div>
	<div class="flex items-center gap-1.5">
		<span
			class="w-3 h-3 rounded-full bg-gradient-to-br from-primary/70 to-primary/80"
		></span>
		<span>Medium</span>
	</div>
	<div class="flex items-center gap-1.5">
		<span
			class="w-3 h-3 rounded-full bg-gradient-to-br from-primary/80 to-primary"
		></span>
		<span>Hard</span>
	</div>
	<span class="ml-auto italic opacity-70"
		>Updated from cached LeetCode snapshot</span
	>
</div>
