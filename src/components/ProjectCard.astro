---
import { Github, ExternalLink } from "lucide-react";
import type { Project } from "../data/projects";

interface Props {
	project: Project;
}

const { project } = Astro.props as Props;
const languagesToShow = project.languages.slice(0, 3);
const moreLanguages = Math.max(0, project.languages.length - 3);
---

<a
	href={`/projects/${project.slug}`}
	class="group block h-full no-underline focus:outline-none"
>
	<div
		class="relative h-full neo-card rounded-none border-2 p-5 sm:p-6 transition-transform duration-200 group-hover:-translate-y-1"
	>
		<div
			class="absolute top-0 left-0 right-0 h-1 bg-primary origin-left scale-x-0 group-hover:scale-x-100 transition-transform"
		>
		</div>
		<div class="relative z-10 flex h-full flex-col gap-3">
			<h3
				class="text-lg sm:text-xl font-semibold tracking-tight text-foreground group-hover:text-primary transition-colors"
				data-project-title
			>
				{project.title}
			</h3>
			<p
				class="text-sm leading-snug text-muted-foreground line-clamp-3"
				data-project-description
				style="display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;"
			>
				{project.description}
			</p>
			<div class="mt-1 flex flex-wrap gap-2">
				{
					languagesToShow.map((lang) => (
						<span
							class="border-2 border-border bg-card text-foreground text-[11px] font-medium px-2.5 py-1 tracking-tight shadow-neo-2xs hover:bg-accent hover:text-accent-foreground transition-colors"
							data-project-language
						>
							{lang}
						</span>
					))
				}
				{
					moreLanguages > 0 && (
						<span
							class="border-2 border-dashed border-border text-[11px] px-2.5 py-1"
							aria-label={`${moreLanguages} more languages`}
						>
							+{moreLanguages}
						</span>
					)
				}
				<span class="sr-only" data-project-language
					>{project.languages.join(" ")}</span
				>
			</div>
			<div class="mt-auto pt-2 flex items-center gap-3">
				{
					project.live_website_url && (
						<span
							class="neo-btn !px-3 !py-2 text-xs sm:text-sm"
							data-live-link
							data-url={project.live_website_url}
							role="button"
							tabindex="0"
							aria-label="Open live demo"
							title="Open live demo"
						>
							<ExternalLink size={16} className="opacity-90" /> Live
						</span>
					)
				}
				<span
					class="neo-btn !bg-accent !text-accent-foreground !px-3 !py-2 text-xs sm:text-sm"
					data-github-link
					data-url={project.github_link}
					role="button"
					tabindex="0"
					aria-label="Open source on GitHub"
					title="Open source on GitHub"
				>
					<Github size={16} className="opacity-90" /> Code
				</span>
			</div>
		</div>
	</div>
</a>
